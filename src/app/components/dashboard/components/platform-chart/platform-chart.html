<div class="chart-container platform-chart">
  <div class="chart-header">
    <h3>LUCRO POR PLATAFORMA</h3>
    <div class="period-selector">
      <button [class.active]="selectedPeriod === 'month'" (click)="setPeriod('month')">Mês</button>
      <button [class.active]="selectedPeriod === 'year'" (click)="setPeriod('year')">Ano</button>
    </div>
  </div>

  <div class="platform-content">
    <div *ngIf="loading" class="loading">Carregando dados...</div>

    <div class="chart-main-layout" *ngIf="!loading && platformData.length > 0">
      <div class="pie-chart-wrapper">
        <canvas #pieChartCanvas></canvas>
      </div>

      <div class="platforms-legend">
        <div class="platform-item" *ngFor="let platform of platformData">
          <div class="platform-indicator">
            <div class="platform-color" [style.background-color]="platform.color"></div>
            <span class="platform-name">{{ platform.name }}</span>
          </div>
          <div class="platform-values">
            <span class="platform-value">R$ {{ platform.value | number:'1.0-0' }}</span>
            <span class="platform-percent">{{ platform.percentage }}%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="empty-state" *ngIf="!loading && platformData.length === 0">
      Nenhum dado neste período.
    </div>
  </div>
</div>